<% news.data.forEach(currentNews => { %>
  <!-- Article Card -->
  <div class="bg-white rounded-xl shadow-md overflow-hidden flex flex-col md:flex-row hover:shadow-lg transition-shadow duration-300 mb-6">
    
    <!-- Thumbnail -->
    <a href="/single/<%= currentNews._id %>" class="md:w-1/3 flex items-center justify-center bg-gray-100">
      <img 
        src="<%= currentNews.image %>" 
        alt="<%= currentNews.title %>" 
        class="w-full h-56 md:h-60 object-contain"
      />
    </a>

    <!-- Content -->
    <div class="p-6 flex flex-col justify-between md:w-2/3">
      <!-- Title -->
      <h3 class="text-xl font-semibold text-gray-800 hover:text-indigo-600 mb-2">
        <a href="/single/<%= currentNews._id %>"><%= currentNews.title %></a>
      </h3>

      <!-- Meta Information -->
      <div class="text-sm text-gray-500 flex flex-wrap gap-4 mb-4">
        <span class="flex items-center gap-1">
          <i class="fa fa-tags"></i>
          <a href="/category/<%= currentNews.category.slug %>" class="hover:text-indigo-600">
            <%= currentNews.category.name %>
          </a>
        </span>
        <span class="flex items-center gap-1">
          <i class="fa fa-user"></i>
          <a href="/author/<%= currentNews.author._id %>" class="hover:text-indigo-600">
            <%= currentNews.author.fullname %>
          </a>
        </span>
        <span class="flex items-center gap-1">
          <i class="fa fa-calendar"></i>
          <%= currentNews.createdAt.toLocaleString("en-IN", { year: "numeric", month: "short", day: "numeric" }) %>
        </span>
      </div>

      <!-- Excerpt -->
      <p class="text-gray-600 mb-4">
        <%= currentNews.content.replace(/<[^>]*>/g, "").substring(0,150) + "..." %>
      </p>

      <!-- Read More -->
      <a href="/single/<%= currentNews._id %>" 
         class="text-indigo-600 font-medium hover:underline self-start">
        Read More â†’
      </a>
    </div>
  </div>
<% }) %>

<%
  function buildQuery(query,page){
    const params = new URLSearchParams(query);
    params.set("page",page);
    return "?" + params.toString();
  } 
%>

<!-- Pagination -->
<% if (news.totalPages > 1) { %>
  <nav class="mt-10">
    <ul class="flex justify-center flex-wrap gap-2">
      <!-- Previous -->
      <li>
        <a href="<%= buildQuery(query, news.prevPage) %>" 
           class="px-4 py-2 rounded-lg border text-sm font-medium
                  <%= news.hasPrevPage ? 'text-gray-700 hover:bg-indigo-600 hover:text-white' : 'text-gray-400 cursor-not-allowed' %>">
          Previous
        </a>
      </li>

      <!-- Page Numbers -->
      <% for(let i = 1; i <= news.totalPages; i++) { %>
        <li>
          <a href="<%= buildQuery(query, i) %>" 
             class="px-4 py-2 rounded-lg border text-sm font-medium
                    <%= (i === news.currentPage) 
                        ? 'bg-indigo-600 text-white border-indigo-600' 
                        : 'text-gray-700 hover:bg-indigo-600 hover:text-white' %>">
            <%= i %>
          </a>
        </li>
      <% } %>

      <!-- Next -->
      <li>
        <a href="<%= buildQuery(query, news.nextPage) %>" 
           class="px-4 py-2 rounded-lg border text-sm font-medium
                  <%= news.hasNextPage ? 'text-gray-700 hover:bg-indigo-600 hover:text-white' : 'text-gray-400 cursor-not-allowed' %>">
          Next
        </a>
      </li>
    </ul>
  </nav>
<% } %>
